{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\nimport * as yup from \"yup\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport FormError from \"../../common/FormError\";\nimport useAxios from \"../../../hooks/useAxios\";\nimport Heading from \"../../layout/Heading\";\n/* import MediaDropdown from \"../media/MediaDropdown\"; */\n\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst schema = yup.object().shape({\n  title: yup.string().required(\"Title is required\")\n});\nexport default function AddPost() {\n  _s();\n\n  const [submitting, setSubmitting] = useState(false);\n  const [serverError, setServerError] = useState(null);\n  const history = useHistory();\n  const http = useAxios();\n  const {\n    register,\n    handleSubmit,\n    errors\n  } = useForm({\n    resolver: yupResolver(schema)\n  });\n\n  async function onSubmit(data) {\n    setSubmitting(true);\n    setServerError(null);\n    data.status = \"publish\";\n\n    if (data.featured_media === \"\") {\n      data.featured_media = null;\n    }\n\n    console.log(data);\n\n    try {\n      const response = await http.post(\"/wp/v2/posts\", data);\n      console.log(\"response\", response.data);\n      history.push(\"/dashboard/posts\");\n    } catch (error) {\n      console.log(\"error\", error);\n      setServerError(error.toString());\n    } finally {\n      setSubmitting(false);\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n}\n/* export default function AdminForms() {\r\n    return (\r\n        <>\r\n        <form className=\"adminAdd\">\r\n            <h2>Ny Referanse</h2>\r\n            <div className=\"message-container\"></div>\r\n            <div className=\"title\">\r\n                <label htmlFor=\"title\">Title</label>\r\n                <input id=\"title\" placeholder=\"Min 5 characters\"/>\r\n            </div>\r\n            <div className=\"description-short\">\r\n                <label htmlFor=\"description-short\">Kort Beskrivelse</label>\r\n                <textarea id=\"description-short\" placeholder=\"Min 20 characters\"></textarea>\r\n            </div>\r\n            <div className=\"description\">\r\n                <label htmlFor=\"description\">Beskrivelse</label>\r\n                <textarea id=\"description\" placeholder=\"Min 50 characters\"></textarea>\r\n            </div>\r\n            <div className=\"featured-image\">\r\n                <label htmlFor=\"featured-image\">Hoved Bilde</label>\r\n                <input type=\"file\" id=\"featured-image\"/>\r\n            </div>\r\n            <div className=\"image\">\r\n                <label htmlFor=\"image\">Bilder</label>\r\n                <input type=\"file\" id=\"image\"/>\r\n            </div>\r\n            \r\n            \r\n            <button className=\"admin-btn\">Publiser</button>\r\n        </form>\r\n        </>\r\n    );\r\n   } */\n\n_s(AddPost, \"TGwzNfjMiR9jysCc8K/T8s/iI/4=\", false, function () {\n  return [useHistory, useAxios, useForm];\n});\n\n_c = AddPost;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddPost\");","map":{"version":3,"names":["useState","useHistory","useForm","yup","yupResolver","FormError","useAxios","Heading","schema","object","shape","title","string","required","AddPost","submitting","setSubmitting","serverError","setServerError","history","http","register","handleSubmit","errors","resolver","onSubmit","data","status","featured_media","console","log","response","post","push","error","toString"],"sources":["C:/Users/fredr/OneDrive/Documents/GitHub/viken_boligentrepenor_v2/src/components/admin/AdminAdd.jsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport * as yup from \"yup\";\r\nimport { yupResolver } from \"@hookform/resolvers/yup\";\r\nimport FormError from \"../../common/FormError\";\r\nimport useAxios from \"../../../hooks/useAxios\";\r\nimport Heading from \"../../layout/Heading\";\r\n/* import MediaDropdown from \"../media/MediaDropdown\"; */\r\n\r\n\r\nconst schema = yup.object().shape({\r\n\ttitle: yup.string().required(\"Title is required\"),\r\n});\r\n\r\nexport default function AddPost() {\r\n\tconst [submitting, setSubmitting] = useState(false);\r\n\tconst [serverError, setServerError] = useState(null);\r\n\r\n\tconst history = useHistory();\r\n\tconst http = useAxios();\r\n\r\n\tconst { register, handleSubmit, errors } = useForm({\r\n\t\tresolver: yupResolver(schema),\r\n\t});\r\n\r\n\tasync function onSubmit(data) {\r\n\t\tsetSubmitting(true);\r\n\t\tsetServerError(null);\r\n\r\n\t\tdata.status = \"publish\";\r\n\r\n\t\tif (data.featured_media === \"\") {\r\n\t\t\tdata.featured_media = null;\r\n\t\t}\r\n\r\n\t\tconsole.log(data);\r\n\r\n\t\ttry {\r\n\t\t\tconst response = await http.post(\"/wp/v2/posts\", data);\r\n\t\t\tconsole.log(\"response\", response.data);\r\n\t\t\thistory.push(\"/dashboard/posts\");\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(\"error\", error);\r\n\t\t\tsetServerError(error.toString());\r\n\t\t} finally {\r\n\t\t\tsetSubmitting(false);\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n        \r\n        </>\r\n\t);\r\n}\r\n\r\n\r\n\r\n/* export default function AdminForms() {\r\n    return (\r\n        <>\r\n        <form className=\"adminAdd\">\r\n            <h2>Ny Referanse</h2>\r\n            <div className=\"message-container\"></div>\r\n            <div className=\"title\">\r\n                <label htmlFor=\"title\">Title</label>\r\n                <input id=\"title\" placeholder=\"Min 5 characters\"/>\r\n            </div>\r\n            <div className=\"description-short\">\r\n                <label htmlFor=\"description-short\">Kort Beskrivelse</label>\r\n                <textarea id=\"description-short\" placeholder=\"Min 20 characters\"></textarea>\r\n            </div>\r\n            <div className=\"description\">\r\n                <label htmlFor=\"description\">Beskrivelse</label>\r\n                <textarea id=\"description\" placeholder=\"Min 50 characters\"></textarea>\r\n            </div>\r\n            <div className=\"featured-image\">\r\n                <label htmlFor=\"featured-image\">Hoved Bilde</label>\r\n                <input type=\"file\" id=\"featured-image\"/>\r\n            </div>\r\n            <div className=\"image\">\r\n                <label htmlFor=\"image\">Bilder</label>\r\n                <input type=\"file\" id=\"image\"/>\r\n            </div>\r\n            \r\n            \r\n            <button className=\"admin-btn\">Publiser</button>\r\n        </form>\r\n        </>\r\n    );\r\n   } */"],"mappings":";;AAAA,SAASA,QAAT,QAAyB,OAAzB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,OAAT,QAAwB,iBAAxB;AACA,OAAO,KAAKC,GAAZ,MAAqB,KAArB;AACA,SAASC,WAAT,QAA4B,yBAA5B;AACA,OAAOC,SAAP,MAAsB,wBAAtB;AACA,OAAOC,QAAP,MAAqB,yBAArB;AACA,OAAOC,OAAP,MAAoB,sBAApB;AACA;;;;AAGA,MAAMC,MAAM,GAAGL,GAAG,CAACM,MAAJ,GAAaC,KAAb,CAAmB;EACjCC,KAAK,EAAER,GAAG,CAACS,MAAJ,GAAaC,QAAb,CAAsB,mBAAtB;AAD0B,CAAnB,CAAf;AAIA,eAAe,SAASC,OAAT,GAAmB;EAAA;;EACjC,MAAM,CAACC,UAAD,EAAaC,aAAb,IAA8BhB,QAAQ,CAAC,KAAD,CAA5C;EACA,MAAM,CAACiB,WAAD,EAAcC,cAAd,IAAgClB,QAAQ,CAAC,IAAD,CAA9C;EAEA,MAAMmB,OAAO,GAAGlB,UAAU,EAA1B;EACA,MAAMmB,IAAI,GAAGd,QAAQ,EAArB;EAEA,MAAM;IAAEe,QAAF;IAAYC,YAAZ;IAA0BC;EAA1B,IAAqCrB,OAAO,CAAC;IAClDsB,QAAQ,EAAEpB,WAAW,CAACI,MAAD;EAD6B,CAAD,CAAlD;;EAIA,eAAeiB,QAAf,CAAwBC,IAAxB,EAA8B;IAC7BV,aAAa,CAAC,IAAD,CAAb;IACAE,cAAc,CAAC,IAAD,CAAd;IAEAQ,IAAI,CAACC,MAAL,GAAc,SAAd;;IAEA,IAAID,IAAI,CAACE,cAAL,KAAwB,EAA5B,EAAgC;MAC/BF,IAAI,CAACE,cAAL,GAAsB,IAAtB;IACA;;IAEDC,OAAO,CAACC,GAAR,CAAYJ,IAAZ;;IAEA,IAAI;MACH,MAAMK,QAAQ,GAAG,MAAMX,IAAI,CAACY,IAAL,CAAU,cAAV,EAA0BN,IAA1B,CAAvB;MACAG,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBC,QAAQ,CAACL,IAAjC;MACAP,OAAO,CAACc,IAAR,CAAa,kBAAb;IACA,CAJD,CAIE,OAAOC,KAAP,EAAc;MACfL,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBI,KAArB;MACAhB,cAAc,CAACgB,KAAK,CAACC,QAAN,EAAD,CAAd;IACA,CAPD,SAOU;MACTnB,aAAa,CAAC,KAAD,CAAb;IACA;EACD;;EAED,oBACC,qCADD;AAKA;AAID;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;GA5EwBF,O;UAIPb,U,EACHK,Q,EAE8BJ,O;;;KAPpBY,O"},"metadata":{},"sourceType":"module"}